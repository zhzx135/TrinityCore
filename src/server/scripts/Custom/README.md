# 自定义NPC脚本示例

这个目录包含了TrinityCore的自定义脚本示例。

## NPC示例 (npc_example.cpp)

这是一个简单的NPC脚本示例，演示了如何创建一个自定义NPC，它可以与玩家进行交互，提供以下功能：

1. 打招呼
2. 告别
3. 治疗玩家

### 如何使用

1. **编译服务器**

   确保将这个脚本包含在你的构建中。如果你使用的是静态脚本构建，它应该已经被包含了。如果你使用的是动态脚本构建，你可能需要重新编译服务器。

   ```bash
   cd build
   cmake ..
   make -j$(nproc)
   ```

2. **导入SQL文件**

   使用以下命令将NPC添加到你的数据库中：

   ```bash
   mysql -u your_username -p your_world_database < src/server/scripts/Custom/npc_example.sql
   ```

   或者使用你喜欢的MySQL客户端导入SQL文件。

3. **重启服务器**

   重启你的世界服务器，使脚本生效。

4. **在游戏中找到NPC**

   这个NPC被放置在以下位置：
   
   - **暴风城**（联盟主城）：坐标 `-8833.37, 628.62, 94.00`，地图ID `0`
   - **奥格瑞玛**（部落主城）：坐标 `1632.18, -4440.43, 15.59`，地图ID `1`

   你可以使用以下GM命令传送到NPC位置：

   ```
   # 传送到暴风城NPC
   .go xyz -8833.37 628.62 94.00 0
   
   # 传送到奥格瑞玛NPC
   .go xyz 1632.18 -4440.43 15.59 1
   ```

   或者使用以下命令将NPC召唤到你的位置：

   ```
   .npc add 90000
   ```

### 自定义

你可以根据需要修改这个脚本，添加更多功能或修改现有功能。以下是一些可能的修改：

- 添加更多对话选项
- 添加商店功能
- 添加传送功能
- 添加buff效果

### 注意事项

- NPC的入口ID是90000，确保这个ID在你的数据库中是唯一的
- 如果你修改了脚本，你需要重新编译服务器并重启世界服务器
- 如果你只修改了SQL文件，你只需要重新导入SQL文件并重启世界服务器

## 如何添加更多自定义脚本

1. 创建一个新的C++文件，例如`my_custom_script.cpp`
2. 实现你的脚本类和功能
3. 添加一个`AddSC_my_custom_script()`函数
4. 在`custom_script_loader.cpp`中声明并调用你的`AddSC_my_custom_script()`函数
5. 如果需要，创建一个SQL文件来添加必要的数据库条目
6. 重新编译服务器并重启世界服务器